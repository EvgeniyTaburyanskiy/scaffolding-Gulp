.#{$moduleCssPrefix}form-btn {
	@include btn;
	padding          : 0;
	width            : 100%;
	height           : map-deep-get($form-box, 'submit', 'height');
	border           : 1px solid map-deep-get($form-box, 'submit', 'bc');
	border-radius    : map-deep-get($form-box, 'submit', 'b-r');
	background-color : map-deep-get($form-box, 'submit', 'bgc');
	color            : map-deep-get($form-box, 'submit', 'color');

	&:hover,
	&:active {
		border-color : map-deep-get($form-box, 'submit', 'bc-a');
		color        : map-deep-get($form-box, 'submit', 'tx-a');
	}
}

.#{$moduleCssPrefix}form-box {
	position         : relative;
	z-index          : 10;
	display          : flex;
	flex-direction   : column;
	min-height       : rem(200px);
	border-radius    : map-deep-get($form-box, 'form', 'b-r');
	background-color : map-deep-get($form-box, 'form', 'bgc');
	@include transition(all .3s ease-in-out);
	box-shadow       : 0 rem(20px) rem(35px) 0 rgba(#000, 0.1);
	-js-display      : flex;
	flex-wrap        : nowrap;

	&:before,
	&:after {
		position         : absolute;
		top              : -5px;
		display          : block;
		width            : 22px;
		height           : 23px;
		// TODO: Картинки бекграундов затянуть в сборку!
		background-image : url(http://decomagia.com/bitrix/templates/decomagia_base/images/budget_total_scrap.png);
		content          : ""
	}

	&:before { left : rem(15px); }
	&:after { right : rem(15px); }

	@include mobile {
		max-height : rem(600px);
	}

	* { box-sizing : border-box; }

	&__close {
		@extend .#{$moduleCssPrefix}form-btn;
		position        : absolute;
		top             : rem(-18px);
		right           : rem(-18px);
		display         : flex;
		width           : rem(36px);
		height          : rem(36px);
		font-weight     : bold;
		justify-content : center;
		align-items     : center;

		&:after {
			width       : 100%;
			content     : "X";
			flex-grow   : 1;
			flex-shrink : 0;
		}

		@include mobile {
			right     : 50%;
			transform : translate(50%, 0%);
		}
	}

	&__header,
	&__footer,
	&__form {
		margin     : 0;
		padding    : rem(10px) 0;
		min-height : rem(48px);
		width      : 100%;
		flex-grow  : 0;
	}

	&__form {
		overflow-y : auto;
		padding    : rem(5px) 0;
		max-height : rem(540px);
		flex-grow  : 1;
	}

	&__footer {
		@include border-bottom-radius(map-deep-get($form-box, 'form', 'b-r'));
		@include transition(background .3s ease-in-out);

		&:hover {
			//background-color : map-deep-get($form-box, 'footer', 'bgc');
		}
	}

	&__title {
		margin  : 0;
		@include font('M');
		padding : rem(5px);
	}

	&__subtitle {
		margin  : 0;
		padding : rem(5px);
		@include font('N');
	}
}

.#{$moduleCssPrefix}form {
	display        : flex;
	flex-direction : column;
	padding        : rem(5px) rem(10px);
	width          : 100%;
	height         : 100%;
	text-align     : left;
	-js-display    : flex;

	*:focus { outline : none; }
	input,
	textarea {
		@include placeholder {
			color : transparent;
		}
	}

	&-field {
		position        : relative;
		display         : flex;
		flex-direction  : row;
		margin-bottom   : rem(10px);
		//min-height      : map-deep-get($form-box, 'field', 'height');
		width           : 100%;
		-js-display     : flex;
		flex-grow       : 1;
		flex-wrap       : nowrap;
		justify-content : flex-start;
		align-items     : center;
		@include transition(all .3s ease-in-out);

		&__label {
			@include font('N');
			position      : absolute;
			top           : 0;
			left          : 0;
			padding       : rem(10px);
			padding-right : rem(0px);
			height        : map-deep-get($form-box, 'field', 'height');
			color         : map-deep-get($form-box, 'field', 'label', 'color');
			opacity       : .5;
			@include transition(all .2s ease-in-out);
			cursor        : text;

			&_active {
				padding-top    : 0;
				padding-bottom : 0;
				@include font('S');
			}
		}

		&__input,
		&__textarea,
		&__quantity,
		&__select {
			margin        : 0 auto;
			padding       : rem(10px);
			padding-right : rem(20px);
			width         : 100%;
			@include font('N');
			height        : map-deep-get($form-box, 'field', 'height');
			border        : 1px solid map-deep-get($form-box, 'field', 'bc');
			border-radius : map-deep-get($form-box, 'field', 'b-r');
			background    : map-deep-get($form-box, 'field', 'bgc');
			color         : map-deep-get($form-box, 'field', 'color');
			flex-grow     : 1;
			flex-shrink   : 0;

			&:focus {
				border-color : map-deep-get($form-box, 'field', 'bc-a');

				& + .#{$moduleCssPrefix}form-field__label {
					padding-top    : 0;
					padding-bottom : 0;
					height         : auto;
					@include font('S');
				}

				&:invalid {
					border-color        : map-deep-get($form-box, 'field', 'status', 'err');
					//background-image    : url(images/invalid.png);
					background-position : 98% center;
					background-size     : rem(16px);
					background-repeat   : no-repeat;
				}
			}

			&:required {
				background-position : 98% center;
				//background-image    : url(http://icones.pro/en/go.php?http://icdn.pro/images/en/t/i/tick-icone-9338-64.png);
				background-size     : rem(16px);
				background-repeat   : no-repeat;

				&:valid {
					border-color        : map-deep-get($form-box, 'field', 'status', 'ok');
					//background-image    : url(http://icones.pro/en/go.php?http://icdn.pro/images/en/t/i/tick-icone-9338-64.png);
					background-position : 98% center;
					background-size     : rem(16px);
					background-repeat   : no-repeat;
				}
			}
		}

		&__textarea {
			height : rem(120px);
		}

		&__upload {
			@include font('N');
			position    : relative;
			padding     : rem(10px);
			width       : 100%;
			height      : auto;
			cursor      : pointer;
			flex-grow   : 1;
			flex-shrink : 0;

			.text {
				margin-left : rem(20px);
			}

			input[type=file] {
				position : absolute;
				z-index  : -1;
				overflow : hidden;
				width    : 0.1px;
				height   : 0.1px;
				opacity  : 0;
			}
		}

		&__select {
			padding : rem(10px);
		}

		&__submit {
			@extend .#{$moduleCssPrefix}form-btn;
			padding       : rem(10px);
			padding-right : rem(20px);
			height        : map-deep-get($form-box, 'submit', 'height');
			font-weight   : bold;
			flex-grow     : 1;
			flex-shrink   : 0;

			input {
				position : absolute;
				z-index  : -1;
				overflow : hidden;
				width    : 0.1px;
				height   : 0.1px;
				opacity  : 0;
			}

			//TODO: Replace !!!
			.fa {
				margin-right : rem(20px);
			}
		}

		&__quantity {
			@include font('N');
			display         : flex;
			margin          : 0 auto;
			padding         : 0;
			min-width       : rem(50px);
			max-width       : rem(120px);
			border          : none;
			text-align      : center;
			font-weight     : bold;
			justify-content : center;
			align-items     : center;

			.minus,
			.plus {
				@extend .#{$moduleCssPrefix}form-btn;
				width       : rem(25px);
				height      : rem(25px);
				font-weight : bold;
				flex-grow   : 0;
				flex-shrink : 0;
			}

			.minus {
				margin-right : rem(5px);
				content      : "-";
			}
			.plus {
				margin-left : rem(5px);
				content     : "+";
			}

			input[type=text] {
				padding     : 0;
				@include font('N');
				border      : none;
				text-align  : center;
				font-weight : bold;
				flex-grow   : 1;
				flex-shrink : 1;
			}

			.measure {
				@include font('S');
				flex-grow : 0;
			}
		}

		// TODO: вынести в отдельный класс
		&_w {
			&10 { width : 10%; flex-grow : 0 }
			&20 { width : 20%; flex-grow : 0 }
			&30 { width : 30%; flex-grow : 0 }
			&40 { width : 40%; flex-grow : 0 }
			&50 { width : 50%; flex-grow : 0 }
			&60 { width : 60%; flex-grow : 0 }
			&70 { width : 70%; flex-grow : 0 }
			&80 { width : 80%; flex-grow : 0 }
			&90 { width : 90%; flex-grow : 0 }
		}
	}

	&_core {
		margin    : 0 auto;
		max-width : map-deep-get($form-box, 'form', 'max-width');
	}

}